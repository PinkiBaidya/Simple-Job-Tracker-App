<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: #2c3e50;
            color: white;
            padding: 1rem 0;
            margin-bottom: 2rem;
        }

        h1 {
            text-align: center;
            margin-bottom: 1rem;
        }

        .card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input, select, textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        button {
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #2980b9;
        }

        .btn-secondary {
            background-color: #95a5a6;
        }

        .btn-secondary:hover {
            background-color: #7f8c8d;
        }

        .btn-danger {
            background-color: #e74c3c;
        }

        .btn-danger:hover {
            background-color: #c0392b;
        }

        .delete-btn {
            background-color: #e74c3c;
            padding: 5px 10px;
            font-size: 12px;
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        .job-item {
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 10px;
            background: #f9f9f9;
            transition: box-shadow 0.3s;
        }

        .job-item:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .job-title {
            font-weight: bold;
            font-size: 18px;
            color: #2c3e50;
        }

        .job-company {
            color: #7f8c8d;
            font-size: 16px;
        }

        .job-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .status {
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-applied { background-color: #3498db; color: white; }
        .status-interview { background-color: #f39c12; color: white; }
        .status-offer { background-color: #27ae60; color: white; }
        .status-rejected { background-color: #e74c3c; color: white; }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .search-box input,
        .search-box select {
            flex: 1;
            min-width: 200px;
        }

        .search-box button {
            white-space: nowrap;
            min-width: 80px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-2px);
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .search-summary {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            color: #2c3e50;
            border-left: 4px solid #3498db;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }

        .no-results i {
            font-size: 48px;
            margin-bottom: 20px;
            display: block;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }

        @media (max-width: 768px) {
            .job-details {
                grid-template-columns: 1fr;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            .search-box input,
            .search-box select,
            .search-box button {
                min-width: auto;
            }
            
            .form-row {
                flex-direction: column;
            }
            
            .job-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>üìã Job Tracker</h1>
            <p style="text-align: center;">Track your job applications with advanced search and filtering</p>
        </div>
    </header>

    <div class="container">
        <!-- Statistics -->
        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalJobs">0</div>
                <div>Total Applications</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="appliedJobs">0</div>
                <div>Applied</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="interviewJobs">0</div>
                <div>Interviews</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="offerJobs">0</div>
                <div>Offers</div>
            </div>
        </div>

        <!-- Add Job Form -->
        <div class="card">
            <h2>üöÄ Add New Job Application</h2>
            <form id="jobForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="company">Company Name *</label>
                        <input type="text" id="company" name="company" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="position">Job Position *</label>
                        <input type="text" id="position" name="position" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="status">Status *</label>
                        <select id="status" name="status" required>
                            <option value="">Select Status</option>
                            <option value="applied">Applied</option>
                            <option value="interview">Interview Scheduled</option>
                            <option value="offer">Offer Received</option>
                            <option value="rejected">Rejected</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="date">Application Date *</label>
                        <input type="date" id="date" name="date" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="salary">Expected Salary</label>
                        <input type="text" id="salary" name="salary" placeholder="e.g., $60,000 - $80,000">
                    </div>
                    
                    <div class="form-group">
                        <label for="location">Location</label>
                        <input type="text" id="location" name="location" placeholder="e.g., New York, NY">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="notes">Notes</label>
                    <textarea id="notes" name="notes" rows="3" placeholder="Additional notes about the job, interview experience, etc..."></textarea>
                </div>
                
                <button type="submit">‚úÖ Add Job Application</button>
            </form>
        </div>

        <!-- Advanced Search -->
        <div class="card">
            <h2>üîç Advanced Search & Filter</h2>
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search company, position, or notes...">
                <select id="filterStatus">
                    <option value="">All Status</option>
                    <option value="applied">Applied</option>
                    <option value="interview">Interview</option>
                    <option value="offer">Offer</option>
                    <option value="rejected">Rejected</option>
                </select>
                <input type="text" id="filterLocation" placeholder="Filter by location...">
                <button onclick="searchJobs()">üîç Search</button>
                <button onclick="clearSearch()" class="btn-secondary">üóëÔ∏è Clear</button>
            </div>
            
            <div class="search-box">
                <input type="date" id="filterDateFrom" placeholder="From date">
                <input type="date" id="filterDateTo" placeholder="To date">
                <select id="sortBy">
                    <option value="date">Sort by Date</option>
                    <option value="company">Sort by Company</option>
                    <option value="position">Sort by Position</option>
                    <option value="status">Sort by Status</option>
                </select>
                <select id="sortOrder">
                    <option value="desc">Newest First</option>
                    <option value="asc">Oldest First</option>
                </select>
            </div>
        </div>

        <!-- Job List -->
        <div class="card">
            <h2>üìä Your Job Applications</h2>
            <div id="jobsList">
                <div class="loading">Loading jobs...</div>
            </div>
        </div>
    </div>

    <script>
        // Job tracker with advanced search and filtering
        let jobs = [];
        let filteredJobs = [];
        let nextId = 1;

        // Load jobs from localStorage
        function loadJobs() {
            const savedJobs = localStorage.getItem('advancedJobTracker');
            if (savedJobs) {
                jobs = JSON.parse(savedJobs);
                if (jobs.length > 0) {
                    nextId = Math.max(...jobs.map(job => job.id)) + 1;
                }
            }
            filteredJobs = jobs;
            displayJobs();
            updateStats();
        }

        // Save jobs to localStorage
        function saveJobs() {
            localStorage.setItem('advancedJobTracker', JSON.stringify(jobs));
        }

        // Add new job
        function addJob(jobData) {
            const newJob = {
                id: nextId++,
                company: jobData.company,
                position: jobData.position,
                status: jobData.status,
                date: jobData.date,
                salary: jobData.salary,
                location: jobData.location,
                notes: jobData.notes,
                createdAt: new Date().toISOString()
            };
            
            jobs.push(newJob);
            saveJobs();
            filteredJobs = jobs;
            displayJobs();
            updateStats();
        }

        // Delete job
        function deleteJob(id) {
            if (confirm('Are you sure you want to delete this job application?')) {
                jobs = jobs.filter(job => job.id !== id);
                saveJobs();
                searchJobs(); // Reapply current filters
                updateStats();
            }
        }

        // Display jobs
        function displayJobs() {
            const jobsList = document.getElementById('jobsList');
            
            if (filteredJobs.length === 0) {
                jobsList.innerHTML = `
                    <div class="no-results">
                        <span style="font-size: 48px;">üì≠</span>
                        <h3>No job applications found</h3>
                        <p>Try adjusting your search filters or add your first job application!</p>
                    </div>
                `;
                return;
            }

            let html = '';
            filteredJobs.forEach(job => {
                html += `
                    <div class="job-item">
                        <div class="job-header">
                            <div>
                                <div class="job-title">${job.position}</div>
                                <div class="job-company">${job.company}</div>
                            </div>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span class="status status-${job.status}">${job.status.toUpperCase()}</span>
                                <button class="delete-btn" onclick="deleteJob(${job.id})" title="Delete job">üóëÔ∏è</button>
                            </div>
                        </div>
                        <div class="job-details">
                            <div><strong>üìÖ Applied:</strong> ${formatDate(job.date)}</div>
                            <div><strong>üí∞ Salary:</strong> ${job.salary || 'Not specified'}</div>
                            <div><strong>üìç Location:</strong> ${job.location || 'Not specified'}</div>
                            ${job.notes ? `<div><strong>üìù Notes:</strong> ${job.notes}</div>` : ''}
                        </div>
                    </div>
                `;
            });
            
            jobsList.innerHTML = html;
        }

        // Update statistics
        function updateStats() {
            const total = jobs.length;
            const applied = jobs.filter(job => job.status === 'applied').length;
            const interview = jobs.filter(job => job.status === 'interview').length;
            const offer = jobs.filter(job => job.status === 'offer').length;
            
            document.getElementById('totalJobs').textContent = total;
            document.getElementById('appliedJobs').textContent = applied;
            document.getElementById('interviewJobs').textContent = interview;
            document.getElementById('offerJobs').textContent = offer;
        }

        // Advanced search and filter
        function searchJobs() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            const statusFilter = document.getElementById('filterStatus').value;
            const locationFilter = document.getElementById('filterLocation').value.toLowerCase().trim();
            const dateFrom = document.getElementById('filterDateFrom').value;
            const dateTo = document.getElementById('filterDateTo').value;
            const sortBy = document.getElementById('sortBy').value;
            const sortOrder = document.getElementById('sortOrder').value;
            
            filteredJobs = jobs.filter(job => {
                // Text search
                const matchesSearch = !searchTerm || 
                    job.company.toLowerCase().includes(searchTerm) ||
                    job.position.toLowerCase().includes(searchTerm) ||
                    (job.notes && job.notes.toLowerCase().includes(searchTerm));
                
                // Status filter
                const matchesStatus = !statusFilter || job.status === statusFilter;
                
                // Location filter
                const matchesLocation = !locationFilter || 
                    (job.location && job.location.toLowerCase().includes(locationFilter));
                
                // Date range filter
                const jobDate = new Date(job.date);
                const matchesDateFrom = !dateFrom || jobDate >= new Date(dateFrom);
                const matchesDateTo = !dateTo || jobDate <= new Date(dateTo);
                
                return matchesSearch && matchesStatus && matchesLocation && matchesDateFrom && matchesDateTo;
            });
            
            // Apply sorting
            filteredJobs.sort((a, b) => {
                let aValue, bValue;
                
                switch(sortBy) {
                    case 'company':
                        aValue = a.company.toLowerCase();
                        bValue = b.company.toLowerCase();
                        break;
                    case 'position':
                        aValue = a.position.toLowerCase();
                        bValue = b.position.toLowerCase();
                        break;
                    case 'status':
                        aValue = a.status;
                        bValue = b.status;
                        break;
                    case 'date':
                    default:
                        aValue = new Date(a.date);
                        bValue = new Date(b.date);
                        break;
                }
                
                if (sortOrder === 'desc') {
                    return aValue < bValue ? 1 : -1;
                } else {
                    return aValue > bValue ? 1 : -1;
                }
            });
            
            displayJobs();
            showSearchSummary();
        }

        // Show search summary
        function showSearchSummary() {
            const searchTerm = document.getElementById('searchInput').value.trim();
            const statusFilter = document.getElementById('filterStatus').value;
            const locationFilter = document.getElementById('filterLocation').value.trim();
            const dateFrom = document.getElementById('filterDateFrom').value;
            const dateTo = document.getElementById('filterDateTo').value;
            
            // Remove existing summary
            const existingSummary = document.querySelector('.search-summary');
            if (existingSummary) {
                existingSummary.remove();
            }
            
            // Show summary if any filters are active
            if (searchTerm || statusFilter || locationFilter || dateFrom || dateTo) {
                const summaryDiv = document.createElement('div');
                summaryDiv.className = 'search-summary';
                
                let summaryHTML = `<strong>üîç Search Results:</strong> Showing ${filteredJobs.length} of ${jobs.length} jobs`;
                
                if (searchTerm) summaryHTML += `<br>‚Ä¢ Text search: "${searchTerm}"`;
                if (statusFilter) summaryHTML += `<br>‚Ä¢ Status: ${statusFilter}`;
                if (locationFilter) summaryHTML += `<br>‚Ä¢ Location: "${locationFilter}"`;
                if (dateFrom) summaryHTML += `<br>‚Ä¢ From: ${formatDate(dateFrom)}`;
                if (dateTo) summaryHTML += `<br>‚Ä¢ To: ${formatDate(dateTo)}`;
                
                summaryDiv.innerHTML = summaryHTML;
                document.getElementById('jobsList').insertBefore(summaryDiv, document.getElementById('jobsList').firstChild);
            }
        }

        // Clear all filters
        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('filterStatus').value = '';
            document.getElementById('filterLocation').value = '';
            document.getElementById('filterDateFrom').value = '';
            document.getElementById('filterDateTo').value = '';
            document.getElementById('sortBy').value = 'date';
            document.getElementById('sortOrder').value = 'desc';
            
            // Remove search summary
            const searchSummary = document.querySelector('.search-summary');
            if (searchSummary) {
                searchSummary.remove();
            }
            
            filteredJobs = jobs;
            displayJobs();
        }

        // Format date
        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }

        // Set default date
        function setDefaultDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date').value = today;
        }

        // Setup live search
        function setupLiveSearch() {
            const searchInput = document.getElementById('searchInput');
            const locationFilter = document.getElementById('filterLocation');
            const statusFilter = document.getElementById('filterStatus');
            const dateFrom = document.getElementById('filterDateFrom');
            const dateTo = document.getElementById('filterDateTo');
            const sortBy = document.getElementById('sortBy');
            const sortOrder = document.getElementById('sortOrder');
            
            // Debounced search for text inputs
            [searchInput, locationFilter].forEach(input => {
                input.addEventListener('input', function() {
                    clearTimeout(this.searchTimeout);
                    this.searchTimeout = setTimeout(searchJobs, 300);
                });
            });
            
            // Immediate search for selects and dates
            [statusFilter, dateFrom, dateTo, sortBy, sortOrder].forEach(input => {
                input.addEventListener('change', searchJobs);
            });
        }

        // Form submission
        document.getElementById('jobForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const jobData = Object.fromEntries(formData);
            
            addJob(jobData);
            
            // Reset form
            this.reset();
            setDefaultDate();
            
            alert('‚úÖ Job application added successfully!');
        });

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            loadJobs();
            setDefaultDate();
            setupLiveSearch();
        });
    </script>
</body>
</html>